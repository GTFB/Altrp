{"version":3,"sources":["webpack:///./resources/modules/editor/src/js/components/Styles.js","webpack:///./resources/modules/editor/src/js/classes/modules/BaseModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/ElementsFactory.js","webpack:///./resources/modules/editor/src/js/classes/Resource.js","webpack:///./resources/modules/editor/src/js/classes/modules/SaveImportModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/SettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateSettingsChangeModule.js","webpack:///./resources/modules/editor/src/js/classes/modules/TemplateDataStorage.js","webpack:///./resources/modules/editor/src/js/classes/Modules.js","webpack:///./resources/modules/editor/src/js/components/WidgetIcon.js","webpack:///./resources/modules/editor/src/js/components/WidgetsPanel.js","webpack:///./resources/modules/editor/src/svgs/content.svg","webpack:///./resources/modules/editor/src/svgs/style.svg","webpack:///./resources/modules/editor/src/svgs/chevron.svg","webpack:///./resources/modules/editor/src/js/components/SettingSection.js","webpack:///./resources/modules/editor/src/js/components/PanelTabContent.js","webpack:///./resources/modules/editor/src/js/components/SettingsPanel.js","webpack:///./resources/modules/editor/src/js/components/EditorWindow.js","webpack:///./resources/modules/editor/src/svgs/desktop.svg","webpack:///./resources/modules/editor/src/svgs/logo.svg","webpack:///./resources/modules/editor/src/svgs/navigation.svg","webpack:///./resources/modules/editor/src/svgs/history.svg","webpack:///./resources/modules/editor/src/svgs/preview.svg","webpack:///./resources/modules/editor/src/svgs/dots.svg","webpack:///./resources/modules/editor/src/svgs/hamburger.svg","webpack:///./resources/modules/editor/src/js/components/HistoryPanel.js","webpack:///./resources/modules/editor/src/js/components/UpdateButton.js","webpack:///./resources/modules/editor/src/svgs/times.svg","webpack:///./resources/modules/editor/src/js/classes/modules/AssetsBrowser.js","webpack:///./resources/modules/editor/src/Editor.js"],"names":["Styles","props","state","elementStyles","window","stylesModule","stylesModuleResolve","elementId","styles","elementFound","this","forEach","elementStyle","push","setState","className","map","data-styles-id","key","Component","BaseModule","modules","ElementsFactory","object","parent","children","element","elementsManager","getElementClass","name","length","child","parseData","id","settings","target","newElement","_duplicateElement","insertNewChildAfter","getId","templateDataStorage","getEditor","elementsIds","_","union","getIds","getName","newChildren","childrenItem","newChild","setParent","component","setChildren","cloneDeep","Resource","data","route","url","fetch","method","headers","then","res","ok","Promise","reject","text","status","json","_token","options","body","JSON","stringify","SaveImportModule","resource","template_id","getTemplateId","store","dispatch","changeTemplateStatus","CONSTANTS","TEMPLATE_SAVING","get","templateData","parse","parsedData","elementsFactory","replaceAll","endLoading","title","TEMPLATE_UPDATED","err","console","error","getTemplateDataForSave","put","SettingsChangeModule","TemplateSettingsChangeModule","TemplateDataStorage","RootElement","rootElement","setCurrentRootElement","toObject","getTemplateData","currentElement","setCurrentElement","BaseElement","elementName","newSection","Section","newColumn","Column","newWidget","appendWidget","appendColumn","appendNewSection","TEMPLATE_NEED_UPDATE","showSettingsPanel","Modules","editor","saveImportModule","settingsChangeModule","templateSettingsChangeModule","load","WidgetIcon","onDragStart","bind","e","startDrag","dataTransfer","effectAllowed","setData","draggable","React","createElement","getIconComponent","height","getTitle","WidgetsPanel","widgets","getWidgetsList","widget","width","fill","xmlns","d","stroke","strokeWidth","SettingSection","open","toggle","controllers","controls","sectionClasses","onClick","label","controller","ControllerComponent","controllersManager","getController","type","controlId","Controller","PanelTabContent","sections","section","idx","sectionId","SettingsPanel","activeTab","getControls","contentTabClasses","TAB_CONTENT","styleTabClasses","TAB_STYLE","advancedTabClasses","TAB_ADVANCED","setActiveTab","connect","EditorWindow","src","UpdateButton","saveTemplate","buttonClasses","templateStatus","fillRule","clipRule","AssetsBrowser","tabClick","toggleBrowser","selectAsset","chooseAsset","tabs","assets","getAssets","selectedAsset","tab","iconsManager","getIconsList","currentTarget","dataset","assetname","assetsToggle","asset","item","onChoose","classes","active","tabClasses","data-tab","AssetContent","iconComponent","data-assetname","_export","assetsManagerSettings","altrpEditor","activePanel","openPageSettings","showWidgetsPanel","onDragEnd","subscribe","getState","loaded","draggableElement","elementDrag","stopDrag","log","initModules","settingsActive","templateClasses","getType","viewBox"],"mappings":"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","file":"1.editor.js","sourcesContent":["import React, {Component} from \"react\";\r\n\r\nclass Styles extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      elementStyles: []\r\n    };\r\n    window.stylesModule = this;\r\n    window.stylesModuleResolve(this);\r\n  }\r\n  /**\r\n   * @param {string} elementId\r\n   * @param {string} styles\r\n   * */\r\n  addElementStyles(elementId, styles){\r\n    if(!styles){\r\n      return\r\n    }\r\n    let elementFound = false;\r\n    let elementStyles = [...this.state.elementStyles];\r\n    elementStyles.forEach(elementStyle=>{\r\n      if(elementStyle.elementId === elementId){\r\n        elementFound = true;\r\n        elementStyle.styles = styles;\r\n      }\r\n    });\r\n    if(!elementFound){\r\n      elementStyles.push({\r\n        elementId,\r\n        styles,\r\n      })\r\n    }\r\n    this.setState({\r\n      ...this.state,\r\n      elementStyles: elementStyles\r\n    })\r\n  }\r\n  render(){\r\n    return <div className=\"styles-container\">\r\n      {this.state.elementStyles.map(elementStyle => {\r\n        return<style data-styles-id={elementStyle.elementId} key={elementStyle.elementId}>{elementStyle.styles}</style>\r\n      })}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default Styles","\r\n/**\r\n * @property {Modules} modules\r\n * */\r\nclass BaseModule {\r\n  /**\r\n   * @param {Modules} modules\r\n   * */\r\n  constructor(modules) {\r\n    this.modules = modules;\r\n  }\r\n}\r\n\r\nexport default BaseModule;","import BaseModule from './BaseModule';\r\nimport {getEditor} from \"../../helpers\";\r\n\r\nclass ElementsFactory extends BaseModule{\r\n  parseData(object, parent){\r\n    let children = [];\r\n    const elementsManager = window.elementsManager;\r\n    /**\r\n     * @member {BaseElement} element\r\n     * */\r\n    let element = new (elementsManager.getElementClass(object.name));\r\n    if( object.children && object.children.length ){\r\n      for( let child of object.children){\r\n        children.push( this.parseData(child, element) );\r\n      }\r\n    }\r\n    element.id = object.id;\r\n    element.children = children;\r\n    /**\r\n     * Если настройки пустый то с сервера приходит пустой массив -- меняем на пустой объект\r\n     * */\r\n    element.settings = (object.settings.length === 0) ? {} : object.settings;\r\n\r\n    if(parent){\r\n      element.parent = parent;\r\n    }\r\n    return element;\r\n  }\r\n\r\n  /**\r\n   * @param {BaseElement} element\r\n   * @param {BaseElement} target\r\n   * @return{BaseElement}\r\n   * */\r\n  duplicateElement(element, target){\r\n\r\n    let newElement = this._duplicateElement(element);\r\n    target.insertNewChildAfter(element.getId(), newElement);\r\n    /**\r\n     * @member {TemplateDataStorage} templateDataStorage\r\n     * */\r\n    let templateDataStorage = getEditor().modules.templateDataStorage;\r\n    templateDataStorage.elementsIds = _.union(templateDataStorage.elementsIds, newElement.getIds());\r\n    return newElement;\r\n  }\r\n  /**\r\n   * @param {BaseElement} element\r\n   * */\r\n  _duplicateElement(element){\r\n    /**\r\n     * @member {BaseElement} newElement\r\n     * */\r\n    let newElement = new (elementsManager.getElementClass(element.getName()));\r\n    let newChildren = [];\r\n    element.children.map((childrenItem)=>{\r\n      let newChild = this._duplicateElement(childrenItem);\r\n      newChild.setParent(newElement);\r\n      newChildren.push(newChild);\r\n    });\r\n    newElement.component = new\r\n    newElement.setChildren(newChildren);\r\n    newElement.settings = _.cloneDeep(element.settings);\r\n    newElement.children = newChildren;\r\n    return newElement;\r\n  }\r\n}\r\n\r\nexport default ElementsFactory;","/**\r\n * @class\r\n * */\r\nclass Resource {\r\n\r\n\r\n  /**\r\n   * @member {Object} routes\r\n   * @member {string} routes.get\r\n   * @member {string} routes.post\r\n   * @member {string} routes.create\r\n   * @member {string} routes.getAll\r\n   */\r\n  constructor(data){\r\n\r\n    this.route = data.route;\r\n    if(! this.route){\r\n      throw 'Нужен URL';\r\n    }\r\n\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  get(id){\r\n    if(! id){\r\n      throw 'Get only by \"id\"';\r\n    }\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n\r\n    let url = this.route + '/' + id;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  getAll(){\r\n\r\n    let options = {\r\n      method: 'get',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n\r\n    let url = this.route;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  post(data){\r\n    data._token = _token;\r\n    let options = {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    return fetch(this.route, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  put(id, data){\r\n    data._token = _token;\r\n    let options = {\r\n      method: 'put',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n    };\r\n    let url = this.route + '/' + id;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n  /**\r\n   * @return {Promise}\r\n   * */\r\n  delete(data){\r\n\r\n    let options = {\r\n      method: 'delete',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n\r\n    };\r\n    let url = this.route + '/' + id;\r\n    return fetch(url, options).then(res => {\r\n      if(res.ok === false){\r\n        return Promise.reject(res.text(), res.status);\r\n      }\r\n      return res.json()\r\n    });\r\n  }\r\n}\r\n\r\nexport default Resource;","import BaseModule from \"./BaseModule\";\r\nimport Resource from \"../Resource\";\r\nimport {CONSTANTS, getEditor, getTemplateId} from \"../../helpers\";\r\nimport RootElement from \"../elements/RootElement\";\r\nimport store from \"../../store/store\";\r\nimport {changeTemplateStatus} from \"../../store/template-status/actions\";\r\n\r\nclass SaveImportModule extends BaseModule{\r\n\r\n  constructor(modules){\r\n    super(modules);\r\n\r\n    this.resource = new Resource({\r\n      route: '/admin/ajax/templates',\r\n    });\r\n  }\r\n\r\n  load(){\r\n    this.template_id = getTemplateId();\r\n    // console.log(this.template_id);\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_SAVING));\r\n    if(this.template_id){\r\n      let res = this.resource.get(this.template_id).then(templateData => {\r\n        let data = JSON.parse(templateData.data);\r\n        let parsedData = this.modules.elementsFactory.parseData(data);\r\n        getEditor().modules.templateDataStorage.replaceAll(parsedData);\r\n        getEditor().endLoading();\r\n        getEditor().modules.templateDataStorage.title = data.title;\r\n        getEditor().modules.templateDataStorage.name = data.name;\r\n        store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n      }).catch(err=>{\r\n        console.error(err);\r\n        store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n      });\r\n    } else {\r\n\r\n    }\r\n  }\r\n\r\n  saveTemplate(){\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_SAVING));\r\n    let templateData = getEditor().modules.templateDataStorage.getTemplateDataForSave();\r\n    this.resource.put(this.template_id, templateData).then(res=>{\r\n      store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n    }).catch(err=>{\r\n      console.error(err);\r\n      store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_UPDATED));\r\n    });\r\n  }\r\n\r\n}\r\n\r\nexport default SaveImportModule;","class SettingsChangeModule {\r\n\r\n}\r\nexport default SettingsChangeModule;","class TemplateSettingsChangeModule {\r\n\r\n}\r\nexport default TemplateSettingsChangeModule;","import RootElement from \"../elements/RootElement\";\r\nimport {CONSTANTS, getEditor, getTemplateId} from \"../../helpers\";\r\nimport BaseModule from \"./BaseModule\";\r\nimport store from '../../store/store';\r\nimport {setCurrentElement, SET_CURRENT_ELEMENT} from '../../store/current-element/actions'\r\nimport BaseElement from \"../elements/BaseElement\";\r\nimport Section from \"../elements/Section\";\r\nimport Column from \"../elements/Column\";\r\nimport {changeTemplateStatus} from \"../../store/template-status/actions\";\r\n\r\nclass TemplateDataStorage extends BaseModule{\r\n\r\n  constructor(modules){\r\n    super(modules);\r\n    this.elementsIds = [];\r\n  }\r\n\r\n  replaceAll(element) {\r\n    if(! element instanceof RootElement ){\r\n      throw 'Expect Root Element as root element;)';\r\n    }\r\n    this.rootElement = element;\r\n    this.elementsIds = element.getIds();\r\n    this.setCurrentRootElement();\r\n  }\r\n\r\n  getTemplateData() {\r\n    return this.rootElement.toObject();\r\n  }\r\n  getTemplateDataForSave(){\r\n    let data = {};\r\n\r\n    data.data = this.getTemplateData();\r\n    data.title = this.title || 'testtitle';\r\n    data.name = this.name || 'testname';\r\n\r\n    return data;\r\n  }\r\n\r\n  setCurrentRootElement(){\r\n    this.currentElement = this.rootElement;\r\n    store.dispatch(setCurrentElement(this.currentElement));\r\n    return this.currentElement;\r\n  }\r\n\r\n  setCurrentElement(element){\r\n    if(! element instanceof BaseElement){\r\n      throw 'Only Base Element Can Be Set as Default'\r\n    }\r\n    this.currentElement = element;\r\n    store.dispatch(setCurrentElement(element));\r\n  }\r\n\r\n  getCurrentElement(){\r\n    if(!this.currentElement){\r\n      return this.setCurrentRootElement();\r\n    }\r\n    return this.currentElement;\r\n  }\r\n\r\n  getRootElement(){\r\n    return this.rootElement\r\n  }\r\n\r\n  addWidgetInSection(elementName){\r\n    let newSection = new Section();\r\n    this.elementsIds.push(newSection.getId());\r\n\r\n    let newColumn = new Column();\r\n    this.elementsIds.push(newColumn.getId());\r\n\r\n    let newWidget = new (window.elementsManager.getElementClass(elementName));\r\n    this.elementsIds.push(newWidget.getId());\r\n\r\n    newColumn.appendWidget(newWidget);\r\n    newSection.appendColumn(newColumn);\r\n    this.rootElement.appendNewSection(newSection);\r\n    this.setCurrentElement(newWidget);\r\n    store.dispatch(changeTemplateStatus(CONSTANTS.TEMPLATE_NEED_UPDATE));\r\n    getEditor().showSettingsPanel();\r\n  }\r\n\r\n}\r\n\r\nexport default TemplateDataStorage;","import ElementsFactory from './modules/ElementsFactory';\r\nimport SaveImportModule from \"./modules/SaveImportModule\";\r\nimport SettingsChangeModule from \"./modules/SettingsChangeModule\";\r\nimport TemplateSettingsChangeModule from \"./modules/TemplateSettingsChangeModule\";\r\nimport TemplateDataStorage from \"./modules/TemplateDataStorage\";\r\n\r\nclass Modules {\r\n  /**\r\n   * @param {Editor} editor\r\n   * */\r\n  constructor(editor){\r\n    this.elementsFactory = new ElementsFactory(this);\r\n    this.saveImportModule = new SaveImportModule(this);\r\n    this.settingsChangeModule = new SettingsChangeModule(this);\r\n    this.templateSettingsChangeModule = new  TemplateSettingsChangeModule(this);\r\n    this.templateDataStorage = new TemplateDataStorage(this);\r\n  }\r\n  loaded(){\r\n    this.saveImportModule.load();\r\n  }\r\n}\r\nexport default Modules;","import React, {Component} from \"react\";\r\nimport BaseElement from \"../classes/elements/BaseElement\";\r\nimport store from '../store/store'\r\nimport {startDrag} from \"../store/element-drag/actions\";\r\n\r\nexport default class WidgetIcon  extends  Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      element: this.props.element,\r\n    };\r\n    this.onDragStart = this.onDragStart.bind(this);\r\n  }\r\n  onDragStart(e){\r\n    store.dispatch(startDrag(null));\r\n    e.dataTransfer.effectAllowed = \"copy\";\r\n    e.dataTransfer.setData('text/plain', this.state.element.getName());\r\n  }\r\n  render() {\r\n    if (!this.state.element instanceof BaseElement) {\r\n      throw 'Widget Component must has Element in props';\r\n    }\r\n    return <div className='widget-icon' draggable=\"true\" onDragStart={this.onDragStart}>\r\n      {\r\n        React.createElement(this.state.element.getIconComponent(), {height: 35})\r\n      }\r\n      <div className=\"widget-icon__title\">\r\n        {this.state.element.getTitle()}\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\n","import React, {Component} from \"react\";\r\nimport WidgetIcon from \"./WidgetIcon\";\r\n\r\n\r\nclass WidgetsPanel extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {widgets: window.elementsManager.getWidgetsList()};\r\n  }\r\n  render() {\r\n    return <div className=\"widget-panel\">\r\n      {\r\n        this.state.widgets.map(widget => {\r\n          return <WidgetIcon element={widget} key={widget.getName()}/>;\r\n        })\r\n      }\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default WidgetsPanel","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"22\" height=\"22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M19.187 1.081h0l-1.606 1.607-.12-.12a.448.448 0 00-.634 0l.035.036-.035-.036L4.01 15.386a8.012 8.012 0 00-1.832 2.827l-.546 1.43a.443.443 0 00-.027.118l-.524.524a.448.448 0 000 .634h0a.447.447 0 00.634 0l.524-.524a.441.441 0 00.118-.027l1.43-.546a8.015 8.015 0 002.827-1.832L17.767 6.838c.007.138-.026.312-.105.502a2.29 2.29 0 01-.498.725l-3.378 3.378a.448.448 0 000 .634l.035-.035-.035.035a.447.447 0 00.634 0s0 0 0 0L17.798 8.7c.407-.407.696-.896.812-1.377l-.049-.012.049.012c.106-.445.054-.863-.148-1.18l.97-.97a.448.448 0 000-.633l-.12-.12 1.607-1.606-.036-.036.036.036a.449.449 0 000-.634l-.036.035.036-.035L19.82 1.08a.448.448 0 00-.634 0zM5.98 17.356a7.121 7.121 0 01-2.513 1.628l-.73.279.279-.73-.047-.018.047.017c.362-.949.91-1.794 1.628-2.512l.397-.397 1.336 1.336-.397.397zm1.031-1.03l-1.336-1.337 11.47-11.47 1.335 1.337-11.469 11.47zM18.678 3.784l-.463-.463 1.29-1.29.462.464-1.289 1.289z\" fill=\"#343B4C\" stroke=\"#3C455B\" strokeWidth=\".1\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"20\" height=\"19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M5.6 15.883c0-1.136-.835-2.08-1.929-2.276V1.317A.419.419 0 003.25.9a.419.419 0 00-.421.417v12.29C1.735 13.803.9 14.747.9 15.883c0 1.279 1.055 2.317 2.35 2.317 1.295 0 2.35-1.038 2.35-2.317zm-2.35 1.484a1.497 1.497 0 01-1.507-1.484c0-.816.675-1.483 1.507-1.483.832 0 1.507.667 1.507 1.483 0 .817-.675 1.484-1.507 1.484zM11.9 9.484a2.376 2.376 0 00-1.873-2.33V1.317A.414.414 0 009.615.9a.414.414 0 00-.413.417v5.812A2.375 2.375 0 007.2 9.484c0 1.193.87 2.185 2.002 2.356v5.943c0 .23.184.417.413.417a.414.414 0 00.412-.417v-5.968a2.376 2.376 0 001.873-2.33zm-2.35 1.55a1.54 1.54 0 01-1.526-1.55A1.54 1.54 0 019.55 7.936c.84 0 1.526.693 1.526 1.548a1.54 1.54 0 01-1.526 1.55zM19.1 3.217C19.1 1.938 18.044.9 16.75.9S14.4 1.938 14.4 3.217c0 1.136.835 2.08 1.929 2.276v12.29c0 .232.19.417.421.417a.419.419 0 00.421-.417V5.493c1.094-.196 1.929-1.14 1.929-2.276zM16.75 4.7a1.497 1.497 0 01-1.507-1.483c0-.817.675-1.484 1.507-1.484.832 0 1.507.667 1.507 1.484 0 .816-.675 1.483-1.507 1.483z\" fill=\"#343B4C\" stroke=\"#343B4C\" strokeWidth=\".2\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"10\" height=\"7\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M1 6l3.5-4 4 4\" stroke=\"#343B4C\" strokeWidth=\"1.5\" /></svg>);","import React, {Component} from \"react\";\r\nimport ChevronIcon from '../../svgs/chevron.svg'\r\nimport Controller from \"../classes/Controller\";\r\n\r\nclass SettingSection extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      open: props.open\r\n    };\r\n    this.toggle = this.toggle.bind(this);\r\n  }\r\n  toggle(){\r\n    this.setState({\r\n      open: !this.state.open\r\n    });\r\n  }\r\n  render() {\r\n    let controllers = this.props.controls || [];\r\n    let sectionClasses = 'settings-section ' + (this.state.open ? 'open' : '');\r\n    return <div className={sectionClasses}>\r\n      <div className=\"settings-section__title d-flex \" onClick={this.toggle}>\r\n        <div className=\"settings-section__icon d-flex \">\r\n          <ChevronIcon/>\r\n        </div>\r\n        <div className=\"settings-section__label\">\r\n          {this.props.label}\r\n        </div>\r\n      </div>\r\n      <div className=\"controllers-wrapper\">\r\n        {\r\n          controllers.map((controller) => {\r\n                let ControllerComponent = window.controllersManager.getController(controller.type);\r\n                return React.createElement(ControllerComponent, {...controller, key: controller.controlId, controller: new Controller(controller)});\r\n              }\r\n          )\r\n        }\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default SettingSection;","import React, {Component} from \"react\";\r\nimport SettingSection from \"./SettingSection\";\r\n\r\nclass PanelTabContent extends Component {\r\n    render(){\r\n      let sections =  this.props.sections || [];\r\n      return <div className=\"settings-controllers\">\r\n        {\r\n          sections.map((section, idx) =>{\r\n            return React.createElement(SettingSection, {\r\n              ...section,\r\n              key: section.sectionId,\r\n              open: idx === 0,\r\n            });\r\n              }\r\n          )\r\n        }\r\n      </div>\r\n    }\r\n}\r\n\r\nexport default PanelTabContent","import React, {Component} from \"react\";\r\nimport {connect} from 'react-redux';\r\nimport ContentIcon from '../../svgs/content.svg'\r\nimport StyleIcon from '../../svgs/style.svg'\r\nimport AdvancedIcon from '../../svgs/advanced.svg'\r\nimport {TAB_ADVANCED, TAB_CONTENT, TAB_STYLE} from \"../classes/modules/ControllersManager\";\r\nimport PanelTabContent from \"./PanelTabContent\";\r\n\r\nclass SettingsPanel extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n      activeTab: 'content',\r\n    };\r\n  }\r\n\r\n  setActiveTab(activeTab){\r\n    this.setState({\r\n        ...this.state, activeTab\r\n    })\r\n  }\r\n\r\n  render() {\r\n\r\n    let controllersManager = window.controllersManager;\r\n\r\n    let sections = [];\r\n    if(this.props.currentElement.getName){\r\n      sections = controllersManager.getControls(this.props.currentElement.getName())[this.state.activeTab] || [];\r\n    }\r\n\r\n    // let sections = this.props.currentElement.getControllers ?\r\n    let contentTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_CONTENT ? 'active' : '');\r\n    let styleTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_STYLE ? 'active' : '');\r\n    let advancedTabClasses = 'panel-tab d-flex ' + (this.state.activeTab === TAB_ADVANCED ? 'active' : '');\r\n    return <div className=\"panel settings-panel d-flex\">\r\n      <div className=\"panel-tabs d-flex\">\r\n        <button className={contentTabClasses} onClick={()=>this.setActiveTab(TAB_CONTENT)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <ContentIcon/>\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Content\r\n          </span>\r\n        </button>\r\n        <button className={styleTabClasses} onClick={()=>this.setActiveTab(TAB_STYLE)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <StyleIcon/>\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Style\r\n          </span>\r\n        </button>\r\n        <button className={advancedTabClasses} onClick={()=>this.setActiveTab(TAB_ADVANCED)}>\r\n          <span className=\"panel-tab__icon\">\r\n            <AdvancedIcon/>\r\n          </span>\r\n          <span className=\"panel-tab__text\">\r\n            Advanced\r\n          </span>\r\n        </button>\r\n      </div>\r\n      <PanelTabContent sections={sections}/>\r\n    </div>\r\n  }\r\n}\r\nfunction mapStateToProps(state) {\r\n  return{\r\n    currentElement:state.currentElement.currentElement\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(SettingsPanel);","import React, {Component} from \"react\";\r\n\r\n\r\nclass EditorWindow extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {};\r\n  }\r\n\r\n  render() {\r\n\r\n    return  <div className=\"editor-window\">\r\n\r\n      {/*<Frame>*/}\r\n        {/*<FrameBindingContext>*/}\r\n          {/*<DropTarget/>*/}\r\n        {/*</FrameBindingContext>*/}\r\n      {/*</Frame>*/}\r\n      {/*<Frame src=\"/admin/editor-content\" >*/}\r\n        {/*<FrameBindingContext/>*/}\r\n      {/*</Frame>*/}\r\n      {/*<FrameContextConsumer>*/}\r\n      <iframe src=\"/admin/editor-content\" />\r\n      {/*</FrameContextConsumer>*/}\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default EditorWindow","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"17\" height=\"15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M15 0H1.364C.612 0 0 .612 0 1.364v9.545c0 .752.612 1.364 1.364 1.364h4.774c-.014.544-.118 1.414-.508 1.824a.67.67 0 01-.516.221.34.34 0 100 .682h6.136a.34.34 0 100-.682.668.668 0 01-.515-.22c-.39-.409-.494-1.28-.509-1.825H15c.752 0 1.364-.612 1.364-1.364V1.364C16.364.612 15.752 0 15 0zM8.182 11.593a.685.685 0 010-1.368.685.685 0 010 1.368zM1.364 9.545V1.364H15v8.181H1.365z\" fill=\"#8E94AA\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"97\" height=\"35\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M20.245 8.309l-3.747 9.57c0 2.31.476 4.088 1.443 5.31.318.41.808.796 1.483 1.154l-1.086 3.398c-.966-.358-1.8-.982-2.516-1.885a11.593 11.593 0 01-1.257-2.057c-.848 1.42-1.801 2.402-2.887 2.92-.82.411-1.827.61-3.032.61-2.423 0-4.449-.862-6.05-2.601C.86 22.883 0 20.388 0 17.228c0-1.101.066-2.097.199-2.96.132-.862.37-1.685.701-2.455.702-1.566 1.642-2.76 2.847-3.584 1.205-.823 2.595-1.234 4.184-1.234 1.47 0 2.74.292 3.813.863 1.51.796 2.622 2.097 3.31 3.902l2.212-4.858 2.979 1.407zm-7.163 9.53c.026-.093.04-.252.04-.464v-.293a.602.602 0 00-.04-.212c0-1.686-.477-3.185-1.417-4.5-.953-1.313-2-1.964-3.151-1.964-1.364 0-2.476.584-3.31 1.765-.914 1.275-1.364 3.053-1.364 5.35 0 2.097.463 3.703 1.403 4.804.834.983 1.894 1.487 3.165 1.487.887 0 1.615-.265 2.158-.796.9-.903 1.748-2.615 2.516-5.177zM38.874 27.05h-3.92l-4.077-11.162-.967-3.066-1.006 3.146-3.959 11.083h-4.184l7.203-19.14a72.897 72.897 0 01-.755-2.018c-.172-.451-.304-.756-.397-.902-.503-.797-1.31-1.195-2.41-1.195-.384 0-1.125.12-2.237.358l.437-3.69a13.272 13.272 0 011.35-.358A5.454 5.454 0 0124.985 0c2.065 0 3.68 1.075 4.833 3.212.437.743 1.032 2.177 1.8 4.3l7.256 19.539zM55.054 10.804h-5.587v10.579c0 .77.026 1.261.066 1.487.053.212.185.411.437.584.238.12.556.185.94.185.291 0 .847-.066 1.695-.185l.582 3.504c-.437.093-1.033.186-1.8.252-.769.066-1.298.106-1.59.106-1.204 0-2.144-.186-2.833-.557-.688-.372-1.178-.916-1.496-1.646-.146-.359-.252-.836-.318-1.447-.066-.597-.106-1.42-.106-2.456V10.804l-2.595-.04c-.556 0-1.072.253-1.55.757-.145.173-.33.438-.582.796l-2.515-2.561c.476-.65.887-1.128 1.231-1.447 1.06-.969 2.198-1.447 3.43-1.447l12.604.04v3.902h-.013zM73.578 11.56c.648 1.567.966 3.372.966 5.416 0 2.124-.344 3.956-1.046 5.495-.702 1.54-1.721 2.761-3.059 3.65-1.35.89-2.793 1.341-4.356 1.341-.94 0-1.681-.093-2.237-.292-.768-.265-1.55-.783-2.344-1.553v9.026h-4.356l.04-18.53c0-3.73 1.258-6.41 3.786-8.016 1.563-.983 3.337-1.487 5.336-1.487 1.655 0 3.112.425 4.383 1.288 1.245.849 2.211 2.07 2.886 3.663zm-4.357-.079c-.9-1.101-1.972-1.659-3.244-1.659-1.244 0-2.356.584-3.31 1.765-.45.585-.807 1.394-1.059 2.443a14.626 14.626 0 00-.384 3.41c0 2.31.45 4.01 1.364 5.098.913 1.088 2 1.62 3.244 1.62 1.297 0 2.41-.558 3.35-1.66.45-.584.807-1.354 1.059-2.35.251-.982.384-2.07.384-3.251 0-1.182-.12-2.23-.344-3.146-.226-.903-.583-1.66-1.06-2.27zM97 10.725l-2.158-.04-.04 16.366h-4.078V10.698h-6.7v16.366h-3.998V10.738c-.239 0-.53.093-.887.265-.345.186-.755.505-1.205.956l-2.662-2.668c.98-.969 1.854-1.593 2.596-1.898.74-.305 1.588-.451 2.515-.451H97v3.783z\" fill=\"#fff\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"15\" height=\"15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M14.437 4.1L7.218 0 0 4.1l7.218 4.124 7.219-4.125z\" fill=\"#fff\" /><path d=\"M7.218 8.933l-4.867-2.78L0 7.487l7.218 4.124 7.219-4.124-2.351-1.336-4.868 2.781z\" fill=\"#fff\" /><path d=\"M7.218 12.322L2.351 9.54 0 10.876 7.218 15l7.219-4.124-2.351-1.335-4.868 2.78z\" fill=\"#fff\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"18\" height=\"15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M9.643 0C5.872 0 2.75 2.8 2.228 6.429H0l3.214 3.214L6.43 6.429H4.394a5.366 5.366 0 015.249-4.286A5.363 5.363 0 0115 7.5a5.363 5.363 0 01-5.357 5.357 5.376 5.376 0 01-4.35-2.23l-1.74 1.252A7.523 7.523 0 009.643 15c4.135 0 7.5-3.365 7.5-7.5S13.778 0 9.643 0z\" fill=\"#8E94AA\" /><path d=\"M8.571 4.286v4.357l3.199 1.918 1.103-1.837-2.159-1.295V4.286H8.571z\" fill=\"#8E94AA\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"17\" height=\"10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path d=\"M8.388 0C5.183 0 2.276 1.754.131 4.602a.664.664 0 000 .793C2.276 8.246 5.183 10 8.388 10s6.112-1.754 8.257-4.602a.664.664 0 000-.793C14.5 1.754 11.593 0 8.388 0zm.23 8.52a3.53 3.53 0 01-3.751-3.75 3.536 3.536 0 013.291-3.29 3.53 3.53 0 013.75 3.75 3.548 3.548 0 01-3.29 3.29zM8.51 6.895a1.897 1.897 0 01-2.017-2.018 1.908 1.908 0 011.774-1.774 1.897 1.897 0 012.018 2.018 1.908 1.908 0 01-1.774 1.774z\" fill=\"#8E94AA\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"13\" height=\"13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path fill=\"#fff\" d=\"M0 10h3v3H0zM5 10h3v3H5zM10 10h3v3h-3zM0 0h3v3H0zM5 0h3v3H5zM10 0h3v3h-3zM0 5h3v3H0zM5 5h3v3H5zM10 5h3v3h-3z\" /></svg>);","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"19\" height=\"14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path fill=\"#fff\" d=\"M0 0h19v2H0zM0 6h19v2H0V6zM0 12h19v2H0z\" /></svg>);","import React, {Component} from \"react\";\r\n\r\nclass HistoryPanel extends Component {\r\n\r\n  render() {\r\n    return <div className=\"history-panel\">\r\n      HistoryPanel\r\n    </div>\r\n  }\r\n}\r\n\r\nexport default HistoryPanel","import Chevron from '../../svgs/chevron.svg';\r\nimport React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {CONSTANTS, getEditor} from \"../helpers\";\r\n\r\nclass UpdateButton extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.saveTemplate = this.saveTemplate.bind(this);\r\n  }\r\n  saveTemplate(e){\r\n    getEditor().modules.saveImportModule.saveTemplate();\r\n  }\r\n render(){\r\n   let buttonClasses = 'btn font_montserrat font_500 btn_grey';\r\n   switch (this.props.templateStatus) {\r\n     case CONSTANTS.TEMPLATE_UPDATED:{\r\n       buttonClasses += ' btn_disabled ';\r\n     }\r\n     break;\r\n     case CONSTANTS.TEMPLATE_NEED_UPDATE:{\r\n       buttonClasses += ' btn_active ';\r\n     }\r\n     break;\r\n   }\r\n   return  <div className=\"control-group d-flex\">\r\n     <button className={buttonClasses} onClick={this.saveTemplate}>\r\n       UPDATE\r\n     </button>\r\n     <button className=\"btn btn_grey\">\r\n       <Chevron className=\"icon\"/>\r\n     </button>\r\n   </div>\r\n }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return{\r\n    templateStatus: state.templateStatus.status,\r\n  };\r\n}\r\nexport default connect(mapStateToProps)(UpdateButton)","import React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => <svg width=\"10\" height=\"11\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M5.583 5.354L9.23 1.707 8.523 1 4.9 4.622 1.753 1.024 1 1.683l3.212 3.67L1 9.025l.753.659L4.9 6.085l3.622 3.622L9.23 9 5.583 5.354z\" fill=\"#343B4C\" /><path d=\"M9.23 1.707l.177.177.176-.177-.176-.177-.177.177zM5.583 5.354l-.176-.177-.177.177.177.176.176-.176zM8.523 1L8.7.823 8.523.646l-.177.177.177.177zM4.9 4.622l-.188.165.175.2.19-.188-.177-.177zM1.753 1.024L1.94.86 1.776.672l-.188.164.165.188zM1 1.683l-.165-.188-.188.164.165.188L1 1.683zm3.212 3.67l.188.165.144-.164-.144-.165-.188.165zM1 9.025L.812 8.86l-.165.188.188.164L1 9.024zm.753.659l-.165.188.188.165.165-.189-.188-.164zM4.9 6.085l.176-.177-.189-.189-.175.201.188.165zm3.622 3.622l-.177.177.177.177.177-.177-.177-.177zM9.23 9l.177.177L9.583 9l-.176-.177L9.23 9zm-.177-7.47L5.407 5.177l.353.353 3.647-3.646-.354-.354zm-.707-.353l.707.707.354-.354L8.7.823l-.354.354zM5.077 4.799L8.7 1.177 8.346.823 4.724 4.445l.353.354zm-3.513-3.61l3.149 3.598.376-.33L1.94.86l-.377.329zm-.4.682l.753-.659-.33-.376-.752.659.33.376zM4.4 5.189l-3.212-3.67-.376.328 3.212 3.671.376-.33zm-.376 0L.812 8.859l.376.33L4.4 5.519l-.376-.33zM.835 9.212l.753.659.33-.376-.753-.659-.33.376zm1.106.635L5.089 6.25l-.377-.33-3.148 3.598.377.33zm2.783-3.585l3.622 3.622.354-.354-3.623-3.622-.353.354zM8.7 9.884l.707-.707-.354-.354-.707.707.354.354zm.707-1.06L5.76 5.176l-.353.353 3.646 3.647.354-.354z\" fill=\"#000\" /></svg>);","// import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport Times from '../../../svgs/times.svg';\r\nimport {assetsToggle} from \"../../store/assets-browser/actions\";\r\nimport {iconsManager} from \"../../helpers\";\r\nclass AssetsBrowser extends Component {\r\n  constructor(){\r\n    super();\r\n    this.tabClick = this.tabClick.bind(this);\r\n    this.toggleBrowser = this.toggleBrowser.bind(this);\r\n    this.selectAsset = this.selectAsset.bind(this);\r\n    this.chooseAsset = this.chooseAsset.bind(this);\r\n    this.state = {\r\n      activeTab: 'icons',\r\n      tabs: [\r\n        // {\r\n        //   name: 'upload',\r\n        //   title: 'Upload Media File',\r\n        // },\r\n        {\r\n          name: 'icons',\r\n          title: 'Icons Library',\r\n        },\r\n        // {\r\n        //   name: 'media',\r\n        //   title: 'Media Library',\r\n        // },\r\n      ],\r\n      assets: this.getAssets('icons'),\r\n      selectedAsset: null,\r\n    };\r\n  }\r\n\r\n  getAssets(tab){\r\n    if(! tab){\r\n      tab = this.state.activeTab;\r\n    }\r\n\r\n    switch (tab){\r\n      case 'icons':{\r\n        return iconsManager().getIconsList();\r\n      }\r\n    }\r\n    return [];\r\n  }\r\n\r\n  selectAsset(e){\r\n   let selectedAsset = e.currentTarget.dataset.assetname;\r\n   this.setState(state=>{\r\n     return{...state, selectedAsset};\r\n   });\r\n  }\r\n\r\n  tabClick(e){\r\n    this.setActiveTab(e.target.dataset.tab)\r\n  }\r\n\r\n  setActiveTab(tab){\r\n    this.setState(state=>{\r\n      return{...state, activeTab: tab}\r\n    })\r\n  }\r\n\r\n  toggleBrowser(){\r\n    this.setState(state=>{\r\n      return{...state, selectedAsset:null};\r\n    });\r\n    this.props.dispatch(assetsToggle())\r\n  }\r\n\r\n  chooseAsset(){\r\n    let asset;\r\n    this.state.assets.forEach(item=>{\r\n      if(item.name === this.state.selectedAsset){\r\n        asset = item;\r\n      }\r\n    });\r\n    if(!asset){\r\n      throw `Asset with name ${this.state.selectedAsset} not found in Assets Browser (${this.state.activeTab})!`\r\n    }\r\n    this.props.onChoose(asset);\r\n    this.setState(state=>{\r\n      return{...state, selectedAsset: null}\r\n    });\r\n    this.props.dispatch(assetsToggle());\r\n  }\r\n\r\n  render(){\r\n    let classes = 'assets-browser';\r\n    if(this.props.active){\r\n      classes += ' assets-browser_active';\r\n    }\r\n    let buttonClasses = 'btn btn_success';\r\n    if(! this.state.selectedAsset){\r\n      buttonClasses += ' btn_disabled';\r\n    }\r\n    return<div className={classes}>\r\n      <div className=\"assets-browser__bg\" onClick={this.toggleBrowser}/>\r\n      <div className=\"assets-browser-content\">\r\n        <div className=\"assets-browser-top\">\r\n          <div className=\"caption\">Append Media</div>\r\n          <button className=\"btn btn_bare assets-browser__close\">\r\n            <Times className=\"icon\" onClick={this.toggleBrowser}/>\r\n          </button>\r\n          <div className=\"assets-browser-nav\">\r\n            {this.state.tabs.map(tab=>{\r\n              let tabClasses = 'assets-browser__tab';\r\n              if(this.state.activeTab === tab.name){\r\n                tabClasses += ' assets-browser__tab_active';\r\n              }\r\n              return <button className={tabClasses}\r\n                             onClick={this.tabClick}\r\n                             key={tab.name}\r\n                             data-tab={tab.name}>{tab.title}</button>\r\n                })}\r\n\r\n          </div>\r\n        </div>\r\n        {\r\n          (this.state.assets.length) ?\r\n            <div className=\"assets-browser-choose-frame\" >\r\n              {\r\n                this.state.assets.map(asset=>{\r\n                  let AssetContent;\r\n                  let classes = 'asset-choose';\r\n                  if(this.state.activeTab === 'icons'){\r\n                    AssetContent = asset.iconComponent;\r\n                    classes += ' asset-choose_icon';\r\n                  }\r\n                  if(this.state.selectedAsset === asset.name){\r\n                    classes += ' asset-choose_selected';\r\n                  }\r\n                  return <div className={classes}\r\n                              data-assetname={asset.name}\r\n                              key={asset.name}\r\n                              onClick={this.selectAsset}>\r\n                    <AssetContent className=\"asset-choose__content\"/>\r\n                  </div>})\r\n              }\r\n            </div> : ''\r\n        }\r\n        <div className=\"assets-browser-bottom\">\r\n          <button className={buttonClasses} onClick={this.chooseAsset}>Choose</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    ...state.assetsManagerSettings,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps)(AssetsBrowser);\r\n","import React, {Component} from \"react\";\r\nimport './sass/editor-style.scss';\r\nimport {hot} from \"react-hot-loader\";\r\nimport Modules from \"./js/classes/Modules\";\r\nimport WidgetsPanel from \"./js/components/WidgetsPanel\";\r\nimport SettingsPanel from \"./js/components/SettingsPanel\";\r\nimport EditorWindow from \"./js/components/EditorWindow\";\r\nimport DesktopIcon from './svgs/desktop.svg';\r\nimport Logo from './svgs/logo.svg';\r\nimport Navigation from './svgs/navigation.svg';\r\nimport History from './svgs/history.svg';\r\nimport Preview from './svgs/preview.svg';\r\nimport Settings from './svgs/settings.svg';\r\nimport Dots from './svgs/dots.svg';\r\nimport Hamburger from './svgs/hamburger.svg';\r\nimport {Provider} from 'react-redux'\r\nimport store from '../src/js/store/store'\r\nimport HistoryPanel from \"./js/components/HistoryPanel\";\r\nimport UpdateButton from \"./js/components/UpdateButton\";\r\nimport {CONSTANTS} from \"./js/helpers\";\r\nimport Styles from \"./js/components/Styles\";\r\nimport {stopDrag} from \"./js/store/element-drag/actions\";\r\nimport AssetsBrowser from \"./js/classes/modules/AssetsBrowser\";\r\n\r\nclass Editor extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    window.altrpEditor = this;\r\n    this.state = {\r\n      // activePanel: 'widgets',\r\n      activePanel: 'settings',\r\n      templateStatus: CONSTANTS.TEMPLATE_UPDATED,\r\n    };\r\n    this.openPageSettings = this.openPageSettings.bind(this);\r\n    this.showSettingsPanel = this.showSettingsPanel.bind(this);\r\n    this.showWidgetsPanel = this.showWidgetsPanel.bind(this);\r\n    this.onDragEnd = this.onDragEnd.bind(this);\r\n    store.subscribe(this.templateStatus.bind(this));\r\n  }\r\n  templateStatus(){\r\n    let templateStatus = store.getState().templateStatus.status;\r\n    if(templateStatus !== this.state.templateStatus){\r\n      this.setState({...this.state, templateStatus});\r\n    }\r\n  }\r\n  initModules() {\r\n    this.modules = new Modules(this);\r\n    this.modules.loaded();\r\n  }\r\n  showWidgetsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: 'widgets'\r\n    })\r\n  }\r\n\r\n  showSettingsPanel() {\r\n    this.setState({\r\n      ...this.state,\r\n      activePanel: 'settings'\r\n    });\r\n  }\r\n  onDragEnd(){\r\n    let draggableElement = store.getState().elementDrag.element;\r\n    if(draggableElement && draggableElement.stopDrag){\r\n      console.log('stop');\r\n      draggableElement.stopDrag();\r\n    }\r\n    store.dispatch(stopDrag());\r\n  }\r\n  endLoading(){\r\n    console.log('editor loaded');\r\n  }\r\n  componentDidMount() {\r\n    this.initModules();\r\n  }\r\n\r\n  openPageSettings() {\r\n    this.modules.templateDataStorage.setCurrentRootElement();\r\n    this.showSettingsPanel();\r\n  }\r\n\r\n  render() {\r\n    let settingsActive = '';\r\n    let templateClasses = 'editor ';\r\n    if(this.state.templateStatus === CONSTANTS.TEMPLATE_SAVING){\r\n      templateClasses += ' editor_saving';\r\n    }\r\n    if(store.getState().currentElement.currentElement.getType &&\r\n        store.getState().currentElement.currentElement.getType() === 'root-element' &&\r\n      this.state.activePanel === 'settings'\r\n    ){\r\n      settingsActive = ' active';\r\n    }\r\n\r\n    return (\r\n      <Provider store={store}>\r\n        <div className={templateClasses} onDragEnd={this.onDragEnd}>\r\n          <div className=\"left-panel\">\r\n            <div className=\"editor-top-panel\">\r\n              <button className=\"btn btn_hamburger\"\r\n                      // onClick={this.showSettingsPanel}\r\n              >\r\n                <Hamburger className=\"icon\"/>\r\n              </button>\r\n              <div className=\"logo\"><Logo viewBox=\"0 0 97 35\"/></div>\r\n              <button className=\"btn btn_dots\" onClick={this.showWidgetsPanel}>\r\n                <Dots className=\"icon\"/>\r\n              </button>\r\n            </div>\r\n            <div className=\"left-panel-main\">\r\n              {\r\n                (this.state.activePanel === 'widgets') &&\r\n                <WidgetsPanel/>\r\n              }\r\n              {\r\n                (this.state.activePanel === 'settings') &&\r\n                <SettingsPanel/>\r\n              }\r\n            </div>\r\n            <div className=\"editor-bottom-panel d-flex align-content-center justify-center\">\r\n              <button className={'btn btn_settings' + settingsActive} onClick={this.openPageSettings}>\r\n                <Settings className=\"icon\"/>\r\n              </button>\r\n              <button className=\"btn \">\r\n                <Navigation className=\"icon\"/>\r\n              </button>\r\n              <button className=\"btn \">\r\n                <History className=\"icon\"/>\r\n              </button>\r\n              <button className=\"btn \">\r\n                <DesktopIcon className=\"icon\"/>\r\n              </button>\r\n              <button className=\"btn \">\r\n                <Preview className=\"icon\"/>\r\n              </button>\r\n              <UpdateButton/>\r\n            </div>\r\n          </div>\r\n          <div className=\"right-panel\">\r\n            <EditorWindow  />\r\n          </div>\r\n        </div>\r\n        <AssetsBrowser/>\r\n      </Provider>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nlet _export;\r\nif (process.env.NODE_ENV === 'production') {\r\n  _export = Editor;\r\n} else {\r\n  _export = hot(module)(Editor);\r\n}\r\n\r\nexport default _export;\r\n"],"sourceRoot":""}