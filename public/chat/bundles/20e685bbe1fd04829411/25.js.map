{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ImportE2eKeysDialog.js","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.js"],"names":["ImportE2eKeysDialog","React","Component","constructor","props","super","ev","files","this","_file","current","setState","enableSubmit","_passphrase","value","length","preventDefault","_startImport","onFinished","_unmounted","createRef","state","phase","errStr","componentWillUnmount","file","passphrase","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","matrixClient","importRoomKeys","JSON","parse","catch","console","error","msg","friendlyText","_t","render","BaseDialog","sdk","disableForm","className","title","onSubmit","_onFormSubmit","htmlFor","ref","id","type","autoFocus","onChange","_onFormChange","disabled","size","onClick","_onCancelClick","PropTypes","instanceOf","MatrixClient","isRequired","func","TextEncoder","window","TextEncodingUtf8","TextDecoder","subtleCrypto","crypto","subtle","webkitSubtle","friendlyError","Error","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","decode","Uint8Array","lineStart","lineEnd","indexOf","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","log","aesProm","hmacProm","all","String","fromCharCode","apply","btoa"],"mappings":"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","file":"bundles/20e685bbe1fd04829411/25.js","sourceRoot":""}